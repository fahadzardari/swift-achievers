---
import Heading from "../common/Heading.astro";
import ChatIcon from "../../assets/home/chat.png";
import CallIcon from "../../assets/home/call.png";
import Image from "astro/components/Image.astro";
---

<section id="get-quote-section" class="container mx-auto my-12">
  <div
    id="get-quote-bg"
    class="bg-gradient flex flex-col items-center justify-between gap-x-12 gap-y-6 rounded-2xl px-12 py-10 md:flex-row"
  >
    <div class="flex flex-col gap-4 lg:max-w-[70%]">
      <Heading id="get-quote-heading" title="Got Questions? Or Need a Quote?" />
      <p
        id="get-quote-paragraph"
        class="3xl:text-xl text-xs font-semibold text-white md:text-sm lg:text-base xl:text-lg"
      >
        We always appreciate your thoughts. So feel free to raise any concern
        with us, whether that be a query not addressed in the FAQs or curiosity
        to know more about us. We’re here for you, and we’ll answer in a jiffy!
      </p>
    </div>
    <div id="get-quote-buttons" class="flex flex-col gap-6">
      <button
        id="get-quote-call"
        class="3xl:text-xl flex items-center justify-center gap-2 rounded-full bg-white px-5 py-1 text-left text-xs font-semibold text-[#120136] md:text-sm xl:text-lg"
      >
        <Image src={CallIcon} alt="Chat Icon" class="h-4 w-4" />
        <span>Call Now</span>
      </button>
      <button
        id="get-quote-chat"
        class="3xl:text-xl flex items-center justify-center gap-2 rounded-full bg-white px-5 py-1 text-left text-xs font-semibold text-[#120136] md:text-sm xl:text-lg"
      >
        <Image src={ChatIcon} alt="Chat Icon" class="h-4 w-4" />
        <span>Get a Quote</span>
      </button>
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/all";
  import SplitType from "split-type";

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener("DOMContentLoaded", () => {
    // Split heading and paragraph
    const headingText = new SplitType("#get-quote-heading", {
      types: "words,chars",
    });
    const paragraphText = new SplitType("#get-quote-paragraph", {
      types: "lines",
    });

    // Heading animation
    gsap.fromTo(
      headingText.chars,
      { opacity: 0, y: 24 },
      {
        opacity: 1,
        y: 0,
        stagger: 0.02,
        duration: 0.5,
        scrollTrigger: {
          trigger: "#get-quote-section",
          start: "top 85%",
          end: "top 55%",
          scrub: 0.6,
          toggleActions: "play none none reverse",
        },
      },
    );

    // Paragraph animation
    gsap.fromTo(
      paragraphText.lines,
      { opacity: 0, y: 20 },
      {
        opacity: 1,
        y: 0,
        stagger: 0.1,
        duration: 0.5,
        scrollTrigger: {
          trigger: "#get-quote-section",
          start: "top 80%",
          end: "top 50%",
          scrub: 0.6,
          toggleActions: "play none none reverse",
        },
      },
    );

    // Buttons animation
    gsap.fromTo(
      ["#get-quote-call", "#get-quote-chat"],
      { opacity: 0, scale: 0.8, y: 30 },
      {
        opacity: 1,
        scale: 1,
        y: 0,
        stagger: 0.15,
        duration: 0.6,
        ease: "power2.out",
        scrollTrigger: {
          trigger: "#get-quote-buttons",
          start: "top 90%",
          end: "top 60%",
          scrub: 0.8,
          toggleActions: "play none none reverse",
        },
      },
    );

    // Subtle background movement
    gsap.fromTo(
      "#get-quote-bg",
      { backgroundPosition: "0% 0%" },
      {
        backgroundPosition: "100% 100%",
        ease: "none",
        scrollTrigger: {
          trigger: "#get-quote-section",
          start: "top bottom",
          end: "bottom top",
          scrub: true,
        },
      },
    );
  });
</script>
