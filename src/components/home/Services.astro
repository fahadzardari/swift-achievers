---
import Heading from "../common/Heading.astro";
import ServiceCard from "./ServiceCard.astro";
---

<div class="services-section container my-24 text-white">
  <div data-anim="fade-up">
    <Heading title="Our Services" id="services-heading" />
  </div>

  <div class="mt-2 flex items-center justify-between">
    <p
      data-anim="fade-up"
      data-anim-delay="0.1"
      class="services-description max-w-2/3 text-xs lg:text-sm 2xl:text-base"
    >
      With our Amazon Marketing Services, we assist brands in establishing a
      growing business cycle through a flexible strategy to advertise on Amazon.
    </p>

    <div
      data-anim="fade-left"
      data-anim-delay="0.1"
      class="services-controls item-center flex gap-x-3"
    >
      <button
        id="services-prev-button"
        class="cursor-pointer rounded-md bg-[#bababa]/25 px-1 py-2 opacity-50 disabled:cursor-not-allowed"
      >
        <svg
          width="26"
          height="14"
          viewBox="0 0 26 14"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M1 7H25"
            stroke="white"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
          <path
            d="M1 7L7 13"
            stroke="white"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
          <path
            d="M1 7L7 1"
            stroke="white"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
        </svg>
      </button>
      <button
        id="services-next-button"
        class="cursor-pointer rounded-md bg-[#bababa]/25 px-1 py-2"
      >
        <svg
          width="26"
          height="14"
          viewBox="0 0 26 14"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M25 7H1"
            stroke="white"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
          <path
            d="M25 7L19 13"
            stroke="white"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
          <path
            d="M25 7L19 1"
            stroke="white"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Swiper with animation group -->
  <div
    id="services-swiper"
    class="my-14"
    data-anim-group
    data-anim-stagger="0.1"
  >
    <div class="swiper-wrapper">
      <!-- Each slide gets data-anim-item attribute -->
      <div class="swiper-slide" data-anim-item>
        <ServiceCard
          title="Amazon Services"
          description="Store Creation, Product Hunting, SEO, PPC Management, FBA Automation, EBC/A+ Content, Inventory Management, Price & Product Comparison, Virtual Assistance."
          link="/services/amazon-store-creation"
          id="card-1"
        />
      </div>
      <div class="swiper-slide" data-anim-item>
        <ServiceCard
          title="Shopify Automation"
          description="Store Setup, Theme Customization, App Integration, Payment Gateway Configuration, Product Importing, Order Fulfillment Automation."
          id="card-2"
        />
      </div>
      <div class="swiper-slide" data-anim-item>
        <ServiceCard
          title="Walmart Automation"
          description="Launch and automate your Walmart seller account with our expert service, including product uploads, order processing, and policy-compliant growth."
          id="card-3"
        />
      </div>
      <div class="swiper-slide" data-anim-item>
        <ServiceCard
          title="TikTok Shop Automation"
          description="We handle TikTok Shop setup, identify viral products, and run influencer-driven content strategies to drive consistent organic and paid sales."
          id="card-4"
        />
      </div>
      <div class="swiper-slide" data-anim-item>
        <ServiceCard
          title="Virtual Assistance"
          description="Get access to trained VAs who take care of daily store tasks like order tracking, product research, customer service, inventory updates, and more."
          link="/services/virtual-assistant"
          id="card-5"
        />
      </div>
      <div class="swiper-slide" data-anim-item>
        <ServiceCard
          title="Amazon Reinstatement Services"
          description="Recover suspended accounts or listings with our expert appeal drafting, case handling, and compliance consulting to get you selling again fast."
          id="card-6"
        />
      </div>
      <div class="swiper-slide" data-anim-item>
        <ServiceCard
          title="Content Creation"
          description="Professional lifestyle images, product photography, and UGC-style videos for TikTok, Amazon listings, or social ads."
          id="card-7"
        />
      </div>
      <div class="swiper-slide" data-anim-item>
        <ServiceCard
          title="Customer Service Management"
          description="Provide 24/7 customer support team for your clients' stores to handle inquiries, refunds, and dispute resolutions."
          id="card-8"
        />
      </div>
      <div class="swiper-slide" data-anim-item>
        <ServiceCard
          title="Social Media Management"
          description="Grow client brands through daily content, reels, and ads on TikTok, Instagram, and Facebook."
          id="card-9"
        />
      </div>
      <div class="swiper-slide" data-anim-item>
        <ServiceCard
          title="Branding & Packaging Design"
          description="Custom brand identity creation, logo, packaging design, and brand story to elevate your client's product appeal."
          id="card-10"
        />
      </div>
    </div>
  </div>
</div>

<script>
  import Swiper from "swiper";
  import { Navigation } from "swiper/modules";
  import "swiper/css";

  document.addEventListener("DOMContentLoaded", () => {
    // Initialize swiper
    const swiper = new Swiper("#services-swiper", {
      modules: [Navigation],
      slidesPerView: 1,
      spaceBetween: 10,
      observer: true,
      observeParents: true,

      breakpoints: {
        640: {
          slidesPerView: 2,
          spaceBetween: 15,
        },
        1024: {
          slidesPerView: 3,
          spaceBetween: 20,
        },
        1536: {
          slidesPerView: 4,
          spaceBetween: 20,
        },
      },

      navigation: {
        nextEl: "#services-next-button",
        prevEl: "#services-prev-button",
      },

      grabCursor: true,
    });

    // Manually handle navigation buttons
    document
      .getElementById("services-next-button")
      .addEventListener("click", () => {
        swiper.slideNext();
      });

    document
      .getElementById("services-prev-button")
      .addEventListener("click", () => {
        swiper.slidePrev();
      });

    // Update button states
    const updateButtonStates = () => {
      const prevButton = document.getElementById("services-prev-button");
      const nextButton = document.getElementById("services-next-button");

      if (swiper.isBeginning) {
        prevButton.classList.add("opacity-50");
      } else {
        prevButton.classList.remove("opacity-50");
      }

      if (swiper.isEnd) {
        nextButton.classList.add("opacity-50");
      } else {
        nextButton.classList.remove("opacity-50");
      }
    };

    swiper.on("slideChange", updateButtonStates);
    swiper.on("resize", updateButtonStates);

    // Initial update
    updateButtonStates();

    // Scroll-based animations
  });
</script>

<style is:global>
  /* Required Swiper styles */
  #services-swiper {
    width: 100%;
    height: auto;
    overflow: hidden;
    position: relative;
  }

  #services-swiper .swiper-wrapper {
    display: flex;
    width: 100%;
  }

  #services-swiper .swiper-slide {
    flex-shrink: 0;
    height: auto;
    position: relative;
  }
</style>
