---
import Heading from "../common/Heading.astro";
import ServiceCard from "./ServiceCard.astro";
---

<section class="container my-24 text-white">
  <Heading title="Our Services" id="services-heading" />
  <div class="mt-2 flex items-center justify-between">
    <p class="max-w-2/3 text-xs lg:text-sm 2xl:text-base">
      With our Amazon Marketing Services, we assist brands in establishing a
      growing business cycle through a flexible strategy to advertise on Amazon.
    </p>
    <div class="item-center flex gap-x-3">
      <button
        id="services-prev-button"
        class="cursor-pointer rounded-md bg-[#bababa]/25 px-1 py-2 opacity-50 disabled:cursor-not-allowed"
      >
        <svg
          width="26"
          height="14"
          viewBox="0 0 26 14"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M1 7H25"
            stroke="white"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
          <path
            d="M1 7L7 13"
            stroke="white"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
          <path
            d="M1 7L7 1"
            stroke="white"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
        </svg>
      </button>
      <button
        id="services-next-button"
        class="cursor-pointer rounded-md bg-[#bababa]/25 px-1 py-2"
      >
        <svg
          width="26"
          height="14"
          viewBox="0 0 26 14"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M25 7H1"
            stroke="white"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
          <path
            d="M25 7L19 13"
            stroke="white"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
          <path
            d="M25 7L19 1"
            stroke="white"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Convert to Swiper structure -->
  <div id="services-swiper" class="my-14">
    <div class="swiper-wrapper">
      <!-- Wrap each ServiceCard in a swiper-slide -->
      <div class="swiper-slide">
        <ServiceCard
          title="Amazon Store Creation"
          description="With our Amazon Marketing Services, we assist brands in establishing a growing business cycle through a flexible strategy to advertise on Amazon."
          link="/services/store-setup"
          id="card-1"
        />
      </div>
      <div class="swiper-slide">
        <ServiceCard
          title="Amazon Marketing Services"
          description="With our Amazon Marketing Services, we assist brands in establishing a growing business cycle through a flexible strategy to advertise on Amazon."
          link="/services/marketing-services"
          id="card-2"
        />
      </div>
      <div class="swiper-slide">
        <ServiceCard
          title="Amazon Marketing Services"
          description="With our Amazon Marketing Services, we assist brands in establishing a growing business cycle through a flexible strategy to advertise on Amazon."
          link="/services/marketing-services"
          id="card-3"
        />
      </div>
      <div class="swiper-slide">
        <ServiceCard
          title="Amazon Marketing Services"
          description="With our Amazon Marketing Services, we assist brands in establishing a growing business cycle through a flexible strategy to advertise on Amazon."
          link="/services/marketing-services"
          id="card-4"
        />
      </div>
      <div class="swiper-slide">
        <ServiceCard
          title="Amazon Product Inventory"
          description="We help manage your product inventory efficiently to ensure you never run out of stock and maintain optimal inventory levels."
          link="/services/inventory-management"
          id="card-5"
        />
      </div>
      <div class="swiper-slide">
        <ServiceCard
          title="Amazon SEO Services"
          description="Optimize your product listings to increase visibility and drive more organic traffic to your Amazon store."
          link="/services/seo-services"
          id="card-6"
        />
      </div>
    </div>
  </div>
</section>

<script>
  import Swiper from "swiper";
  import { Navigation } from "swiper/modules";
  import "swiper/css";

  document.addEventListener("DOMContentLoaded", () => {
    const swiper = new Swiper("#services-swiper", {
      modules: [Navigation],
      slidesPerView: 1,
      spaceBetween: 10,
      observer: true,
      observeParents: true,

      breakpoints: {
        640: {
          slidesPerView: 2,
          spaceBetween: 15,
        },
        1024: {
          slidesPerView: 3,
          spaceBetween: 20,
        },
        1536: {
          slidesPerView: 4,
          spaceBetween: 20,
        },
      },

      navigation: {
        nextEl: "#services-next-button",
        prevEl: "#services-prev-button",
      },

      grabCursor: true,
    });

    // Manually handle navigation buttons
    document
      .getElementById("services-next-button")
      .addEventListener("click", () => {
        swiper.slideNext();
      });

    document
      .getElementById("services-prev-button")
      .addEventListener("click", () => {
        swiper.slidePrev();
      });

    // Update button states
    const updateButtonStates = () => {
      const prevButton = document.getElementById("services-prev-button");
      const nextButton = document.getElementById("services-next-button");

      if (swiper.isBeginning) {
        prevButton.classList.add("opacity-50");
      } else {
        prevButton.classList.remove("opacity-50");
      }

      if (swiper.isEnd) {
        nextButton.classList.add("opacity-50");
      } else {
        nextButton.classList.remove("opacity-50");
      }
    };

    swiper.on("slideChange", updateButtonStates);
    swiper.on("resize", updateButtonStates);

    // Initial update
    updateButtonStates();
  });
</script>

<style is:global>
  /* Required Swiper styles */
  #services-swiper {
    width: 100%;
    height: auto;
    overflow: hidden;
    position: relative;
  }

  #services-swiper .swiper-wrapper {
    display: flex;
    width: 100%;
  }

  #services-swiper .swiper-slide {
    flex-shrink: 0;
    height: auto;
    position: relative;
  }
</style>
